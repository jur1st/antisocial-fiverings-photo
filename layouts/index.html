{{ define "main" }}
{{ .Content }}

<div class="theme-controls">
  <button id="theme-toggle" class="theme-toggle-btn">
    <span class="theme-label">Night Mode</span>
  </button>
</div>

<script>
document.addEventListener('DOMContentLoaded', function() {
  const themeToggle = document.getElementById('theme-toggle');
  const themeLabel = document.querySelector('.theme-label');
  
  if (themeToggle && themeLabel) {
    // Load saved theme preference
    const savedTheme = localStorage.getItem('theme');
    if (savedTheme === 'flynn') {
      document.documentElement.setAttribute('data-theme', 'flynn');
      themeLabel.textContent = 'Light Mode';
    } else {
      document.documentElement.removeAttribute('data-theme');
      themeLabel.textContent = 'Night Mode';
    }
    
    themeToggle.addEventListener('click', function() {
      const currentTheme = document.documentElement.getAttribute('data-theme');
      
      if (currentTheme === 'flynn') {
        document.documentElement.removeAttribute('data-theme');
        themeLabel.textContent = 'Night Mode';
        localStorage.setItem('theme', 'light');
      } else {
        document.documentElement.setAttribute('data-theme', 'flynn');
        themeLabel.textContent = 'Light Mode';
        localStorage.setItem('theme', 'flynn');
      }
    });
  }
});
</script>
{{ end }}